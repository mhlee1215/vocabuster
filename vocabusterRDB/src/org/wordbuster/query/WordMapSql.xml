<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="WordMapSql">

	<select id="retrieveWordMapCount" parameterClass="org.wordbuster.domain.VBWordMap" resultClass="Integer">
		SELECT count(*)  
    	FROM vbwordmap
    	WHERE 1=1
    	<isNotEmpty property="userid" >
    	and userid = '$userid$'
    	</isNotEmpty>
	</select>
	
	<select id="retrieveUserWordMapList" parameterClass="org.wordbuster.domain.VBMyWordSearchVO" resultClass="org.wordbuster.domain.VBWordMap">
		SELECT userid, wordname, score, delaycount, wrongcount, answercount, insertcount 
    	FROM vbwordmap
    	WHERE userid = '$searchUserid$'
    	<isNotEmpty property="searchKeyword">
    	AND wordname LIKE '%$searchKeyword$%'
    	</isNotEmpty>
    	<isNotEmpty property="searchOrderString">
    	ORDER BY $searchOrderString$
    	</isNotEmpty>
    	LIMIT $pageSize$ OFFSET $pageOffset$
	</select>
	
	<select id="retrieveWordMap" parameterClass="org.wordbuster.domain.VBWordMap" resultClass="org.wordbuster.domain.VBWordMap">
		SELECT userid, wordname, score, delaycount, wrongcount, answercount, insertcount 
    	FROM vbwordmap
    	WHERE 
    	userid = $userid$
    	and wordname = '$wordName$' 
	</select>
	
	<insert id="insertWordMap" parameterClass="org.wordbuster.domain.VBWordMap">
		INSERT INTO vbwordmap(userid, wordname, score, delaycount, wrongcount, answercount, insertcount) 
    	VALUES($userid$, '$wordName$', 0, 0, 0, 0, 1)
	</insert>
	
	<update id="updateWordMap" parameterClass="org.wordbuster.domain.VBWordMap">
		UPDATE vbwordmap 
    	SET 
    		userid = $userid$ 
    		<isNotEmpty property="score">
    		,score = $score$ 
    		</isNotEmpty>
    		<isNotEmpty property="delayCount">
    		,delaycount = $delayCount$
    		</isNotEmpty> 
    		<isNotEmpty property="wrongCount">
    		,wrongcount = $wrongCount$
    		</isNotEmpty> 
    		<isNotEmpty property="answerCount">
    		,answercount = $answerCount$
    		</isNotEmpty>
    		<isNotEmpty property="insertCount">
    		,insertcount = $insertCount$
    		</isNotEmpty>
    	WHERE 
    		userid = $userid$
    		and wordname = '$wordName$' 
	</update>
	
	<delete id="deleteWordMap" parameterClass="org.wordbuster.domain.VBWordMap">
		DELETE FROM vbwordmap
    	WHERE 
    		userid = $userid$
    		<isNotEmpty property="wordName">
    		and wordname = '$wordName$'
    		</isNotEmpty>  
	</delete>
</sqlMap>


